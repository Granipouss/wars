import type { MovementType } from './enums';

export const UnitTypes = [
    'transportCopter',
    'apc',
    'blackBoat',
    'lander',
    'infantry',
    'recon',
    'blackBomb',
    'sub',
    'mech',
    'artillery',
    'tank',
    'antiAir',
    'missile',
    'rocket',
    'mediumTank',
    'neoTank',
    'megaTank',
    'battleCopter',
    'cruiser',
    'bomber',
    'fighter',
    'stealth',
    'battleship',
    'carrier',
    'pipeRunner',
] as const;

export type UnitType = (typeof UnitTypes)[number];

export type Facility = 'base' | 'airport' | 'port';

export type Range = [number, number];

export interface UnitData {
    readonly type: UnitType;
    readonly cost: number;
    readonly facility: Facility;
    readonly movementType: MovementType;
    readonly moveRange: number;
    readonly initialFuel: number;
    readonly vision: number;
    readonly attackRange?: Range;
    readonly initialAmmo?: number;
    readonly transport?: {
        readonly capacity: number;
        readonly targets: readonly UnitType[];
    };
}

const directRange: Range = [1, 1];

export const canCaptureUnits: UnitType[] = ['infantry', 'mech'];

export const UnitsData: Record<UnitType, UnitData> = {
    infantry: {
        type: 'infantry',
        cost: 1000,
        facility: 'base',
        movementType: 'foot',
        moveRange: 3,
        initialFuel: 99,
        vision: 2,
        attackRange: directRange,
    },
    mech: {
        type: 'mech',
        cost: 3000,
        facility: 'base',
        movementType: 'boots',
        moveRange: 2,
        initialFuel: 70,
        vision: 2,
        initialAmmo: 3,
        attackRange: directRange,
    },
    recon: {
        type: 'recon',
        cost: 4000,
        facility: 'base',
        vision: 5,
        initialFuel: 80,
        attackRange: directRange,
        movementType: 'tires',
        moveRange: 8,
    },
    apc: {
        type: 'apc',
        cost: 5000,
        facility: 'base',
        moveRange: 5,
        vision: 1,
        initialFuel: 70,
        movementType: 'treads',
        transport: {
            capacity: 1,
            targets: ['infantry', 'mech'],
        },
    },
    artillery: {
        type: 'artillery',
        cost: 6000,
        facility: 'base',
        vision: 1,
        initialFuel: 50,
        attackRange: [2, 3],
        initialAmmo: 9,
        movementType: 'treads',
        moveRange: 5,
    },
    tank: {
        type: 'tank',
        cost: 7000,
        facility: 'base',
        moveRange: 6,
        vision: 3,
        initialAmmo: 9,
        attackRange: directRange,
        movementType: 'treads',
        initialFuel: 70,
    },
    antiAir: {
        type: 'antiAir',
        cost: 8000,
        facility: 'base',
        vision: 2,
        initialFuel: 60,
        movementType: 'treads',
        attackRange: directRange,
        moveRange: 6,
        initialAmmo: 9,
    },
    missile: {
        type: 'missile',
        cost: 12000,
        facility: 'base',
        movementType: 'tires',
        moveRange: 4,
        initialAmmo: 6,
        attackRange: [3, 5],
        vision: 5,
        initialFuel: 50,
    },
    rocket: {
        type: 'rocket',
        cost: 15000,
        facility: 'base',
        movementType: 'tires',
        attackRange: [3, 5],
        moveRange: 5,
        initialAmmo: 6,
        vision: 1,
        initialFuel: 50,
    },
    mediumTank: {
        type: 'mediumTank',
        cost: 16000,
        facility: 'base',
        vision: 1,
        moveRange: 5,
        initialFuel: 50,
        initialAmmo: 8,
        movementType: 'treads',
        attackRange: directRange,
    },
    pipeRunner: {
        type: 'pipeRunner',
        cost: 20000,
        facility: 'base',
        attackRange: [2, 5],
        movementType: 'pipe',
        moveRange: 9,
        vision: 4,
        initialAmmo: 9,
        initialFuel: 99,
    },
    neoTank: {
        type: 'neoTank',
        cost: 22000,
        facility: 'base',
        initialAmmo: 9,
        moveRange: 6,
        vision: 1,
        initialFuel: 99,
        movementType: 'treads',
        attackRange: directRange,
    },
    megaTank: {
        type: 'megaTank',
        cost: 28000,
        facility: 'base',
        initialAmmo: 3,
        vision: 1,
        moveRange: 4,
        initialFuel: 50,
        movementType: 'treads',
        attackRange: directRange,
    },
    transportCopter: {
        type: 'transportCopter',
        cost: 5000,
        moveRange: 6,
        vision: 2,
        facility: 'airport',
        movementType: 'air',
        initialFuel: 99,
        transport: {
            capacity: 1,
            targets: ['infantry', 'mech'],
        },
    },
    battleCopter: {
        type: 'battleCopter',
        cost: 9000,
        vision: 3,
        initialFuel: 99,
        facility: 'airport',
        movementType: 'air',
        moveRange: 9000,
        initialAmmo: 6,
        attackRange: directRange,
    },
    fighter: {
        type: 'fighter',
        cost: 20000,
        vision: 2,
        initialFuel: 99,
        movementType: 'air',
        facility: 'airport',
        moveRange: 9,
        initialAmmo: 9,
        attackRange: directRange,
    },
    bomber: {
        type: 'bomber',
        cost: 22000,
        vision: 2,
        initialAmmo: 9,
        movementType: 'air',
        facility: 'airport',
        moveRange: 7,
        initialFuel: 99,
        attackRange: directRange,
    },
    stealth: {
        type: 'stealth',
        cost: 24000,
        vision: 4,
        initialFuel: 60,
        moveRange: 6,
        movementType: 'air',
        facility: 'airport',
        initialAmmo: 6,
        attackRange: directRange,
    },
    blackBomb: {
        type: 'blackBomb',
        cost: 25000,
        vision: 1,
        moveRange: 9,
        attackRange: [0, 3], // TODO is this suitable for how we'll handle it?
        movementType: 'air',
        facility: 'airport',
        initialFuel: 45,
    },
    blackBoat: {
        type: 'blackBoat',
        cost: 7500,
        vision: 1,
        moveRange: 7,
        movementType: 'lander',
        facility: 'port',
        initialFuel: 60,
        transport: {
            capacity: 2,
            targets: ['infantry', 'mech'],
        },
    },
    lander: {
        type: 'lander',
        cost: 12000,
        vision: 1,
        movementType: 'lander',
        facility: 'port',
        moveRange: 6,
        initialFuel: 99,
        transport: {
            capacity: 2,
            targets: [
                'apc',
                'infantry',
                'recon',
                'mech',
                'artillery',
                'tank',
                'antiAir',
                'missile',
                'rocket',
                'mediumTank',
                'neoTank',
                'megaTank',
            ],
        },
    },
    cruiser: {
        type: 'cruiser',
        cost: 18000,
        vision: 3,
        moveRange: 6,
        movementType: 'sea',
        facility: 'port',
        initialAmmo: 9,
        initialFuel: 99,
        attackRange: directRange,
        transport: {
            capacity: 2,
            targets: ['transportCopter', 'battleCopter'],
        },
    },
    sub: {
        type: 'sub',
        cost: 20000,
        vision: 5,
        moveRange: 5,
        facility: 'port',
        movementType: 'sea',
        initialAmmo: 6,
        initialFuel: 60,
        attackRange: directRange,
    },
    battleship: {
        type: 'battleship',
        cost: 28000,
        attackRange: [2, 6],
        vision: 2,
        movementType: 'sea',
        moveRange: 5,
        facility: 'port',
        initialAmmo: 9,
        initialFuel: 99,
    },
    carrier: {
        type: 'carrier',
        cost: 30000,
        attackRange: [3, 8],
        vision: 4,
        movementType: 'sea',
        facility: 'port',
        moveRange: 5,
        initialAmmo: 9,
        initialFuel: 99,
        transport: {
            capacity: 2,
            targets: ['transportCopter', 'blackBomb', 'battleCopter', 'bomber', 'fighter', 'stealth'],
        },
    },
};
